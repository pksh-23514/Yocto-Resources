BeagleBone Black Yocto Image Build:
===================================
1. The BeagleBone Black is one of the reference Boards supported by the Yocto Project.
	=> MACHINE ?= "beaglebone-yocto"

2. Run the Build Environment setup script on the Host Machine.
prabhat_kiran@coldstone:~/Documents/Learnings/Yocto_Resources/Poky/poky$ source oe-init-build-env build_BBB

3. Open the 'local.conf' file to update the 'MACHINE' variable for the BeagleBone Black Image Build.
prabhat_kiran@coldstone:~/Documents/Learnings/Yocto_Resources/Poky/poky/build_BBB$ vi conf/local.conf
=> MACHINE ?= "beaglebone-yocto"
=> #MACHINE ?= "qemux86-64"

4. Execute the 'bitbake' command to Build an Image with the new Configuration.
prabhat_kiran@coldstone:~/Documents/Learnings/Yocto_Resources/Poky/poky/build_BBB$ bitbake core-image-minimal
Loading cache: 100% |                                                                                                                                            | ETA:  --:--:--
Loaded 0 entries from dependency cache.
Parsing recipes: 100% |##########################################################################################################################################| Time: 0:00:17
Parsing of 883 .bb files complete (0 cached, 883 parsed). 1644 targets, 45 skipped, 0 masked, 0 errors.
NOTE: Resolving any missing task queue dependencies

Build Configuration:
BB_VERSION           = "2.0.0"
BUILD_SYS            = "x86_64-linux"
NATIVELSBSTRING      = "ubuntu-20.04"
TARGET_SYS           = "arm-poky-linux-gnueabi"
MACHINE              = "beaglebone-yocto"
DISTRO               = "poky"
DISTRO_VERSION       = "4.0.12"
TUNE_FEATURES        = "arm vfp cortexa8 neon callconvention-hard"
TARGET_FPU           = "hard"
meta                 
meta-poky            
meta-yocto-bsp       = "my-kirkstone:e19a76951b61ef7403dd64af844a3cfe16fda118"

Initialising tasks: 100% |#######################################################################################################################################| Time: 0:00:01
Sstate summary: Wanted 951 Local 9 Mirrors 0 Missed 942 Current 495 (0% match, 34% complete)
NOTE: Executing Tasks
NOTE: Tasks Summary: Attempted 3760 tasks of which 1644 didn't need to be rerun and all succeeded.

5. After the Build is successful, the Target Image binaries are present under the 'build' directory.
prabhat_kiran@coldstone:~/Documents/Learnings/Yocto_Resources/Poky/poky/build_BBB$ cd tmp/deploy/images/
prabhat_kiran@coldstone:~/Documents/Learnings/Yocto_Resources/Poky/poky/build_BBB/tmp/deploy/images$ ls
beaglebone-yocto
prabhat_kiran@coldstone:~/Documents/Learnings/Yocto_Resources/Poky/poky/build/tmp/deploy/images$ cd beaglebone-yocto
prabhat_kiran@coldstone:~/Documents/Learnings/Yocto_Resources/Poky/poky/build/tmp/deploy/images/beaglebone-yocto$ ls
am335x-bone--5.15.184+git0+9c4fc176ec_27eaa24a04-r0-beaglebone-yocto-<buildhash>.dtb		core-image-minimal-beaglebone-yocto.tar.bz2
am335x-bone-beaglebone-yocto.dtb								core-image-minimal-beaglebone-yocto.testdata.json
am335x-boneblack--5.15.184+git0+9c4fc176ec_27eaa24a04-r0-beaglebone-yocto-<buildhash>.dtb	core-image-minimal-beaglebone-yocto.wic
am335x-boneblack-beaglebone-yocto.dtb								core-image-minimal-beaglebone-yocto.wic.bmap
am335x-boneblack.dtb										core-image-minimal.env
am335x-bone.dtb											MLO
am335x-bonegreen--5.15.184+git0+9c4fc176ec_27eaa24a04-r0-beaglebone-yocto-<buildhash>.dtb	MLO-beaglebone-yocto
am335x-bonegreen-beaglebone-yocto.dtb								MLO-beaglebone-yocto-2022.01-r0
am335x-bonegreen.dtb										modules--5.15.184+git0+9c4fc176ec_27eaa24a04-r0-beaglebone-yocto-<buildhash>.tgz
core-image-minimal-beaglebone-yocto-<buildhash>.qemuboot.conf					modules-beaglebone-yocto.tgz
core-image-minimal-beaglebone-yocto-<buildhash>.rootfs.jffs2					u-boot-beaglebone-yocto-2022.01-r0.img
core-image-minimal-beaglebone-yocto-<buildhash>.rootfs.manifest					u-boot-beaglebone-yocto.img
core-image-minimal-beaglebone-yocto-<buildhash>.rootfs.tar.bz2					u-boot.img
core-image-minimal-beaglebone-yocto-<buildhash>.rootfs.wic					u-boot-initial-env
core-image-minimal-beaglebone-yocto-<buildhash>.rootfs.wic.bmap					u-boot-initial-env-beaglebone-yocto
core-image-minimal-beaglebone-yocto-<buildhash>.testdata.json					u-boot-initial-env-beaglebone-yocto-2022.01-r0
core-image-minimal-beaglebone-yocto.jffs2							zImage
core-image-minimal-beaglebone-yocto.manifest							zImage--5.15.184+git0+9c4fc176ec_27eaa24a04-r0-beaglebone-yocto-<buildhash>.bin
core-image-minimal-beaglebone-yocto.qemuboot.conf						zImage-beaglebone-yocto.bin

Preparing SD card for Booting:
==============================
1. Connect the SD card to the Host using a card reader.
2. Unmount the partitions (if any) by executing the following command on the correct Device (/dev/sdx).
	=> umount /dev/sdx
3. The SD card has to formatted for the previous partitions using the "fdisk" utility on Linux.
prabhat_kiran@coldstone:~/Documents/Learnings/Yocto_Resources/Poky/poky/build_BBB/tmp/deploy/images$ sudo fdisk /dev/sdx

Welcome to fdisk (util-linux 2.34)
Changes will remain in memory only, until you decide to write them.
Be careful before using the write command.

Command (m for help): d
Partition number (1, default 1): 1

Partition 1 has been deleted.

4. The first partition has to be created for containing the Boot files with a size of 32 MB.
prabhat_kiran@coldstone:~/Documents/Learnings/Yocto_Resources/Poky/poky/build_BBB/tmp/deploy/images$ sudo fdisk /dev/sdx

Welcome to fdisk (util-linux 2.34)
Changes will remain in memory only, until you decide to write them.
Be careful before using the write command.

Command (m for help): n
Partition type
   p   primary (0 primary, 0 extended, 4 free)
   e   extended (container for logical partitions)
Select (default p): p
Partition number (1-4, default 1): 1
First sector (2048-62552063, default 2048): 2048
Last sector, +sectors or +size{K,M,G,T,P} (2048-62552063, default 62552063): +32M

Created a new partition 1 of type 'Linux' and of size 32 MiB.
Partition #1 contains a ext4 signature.

Do you want to remove the signature? [Y]es/[N]o: Y

The signature will be removed by a write command.

5. The second partition has to be created for containing the RootFS with all the remaining size on the SD card.
prabhat_kiran@coldstone:~/Documents/Learnings/Yocto_Resources/Poky/poky/build_BBB/tmp/deploy/images$ sudo fdisk /dev/sdx

Welcome to fdisk (util-linux 2.34)
Changes will remain in memory only, until you decide to write them.
Be careful before using the write command.

Command (m for help): n
Partition type
   p   primary (1 primary, 0 extended, 3 free)
   e   extended (container for logical partitions)
Select (default p): p
Partition number (2-4, default 2): 2
First sector (67584-62552063, default 67584): 67584
Last sector, +sectors or +size{K,M,G,T,P} (67584-62552063, default 62552063): 62552063

Created a new partition 2 of type 'Linux' and of size 29.8 GiB.

6. The first partition must be made Bootable and the signature must be FAT32.
prabhat_kiran@coldstone:~/Documents/Learnings/Yocto_Resources/Poky/poky/build_BBB/tmp/deploy/images$ sudo fdisk /dev/sdx

Welcome to fdisk (util-linux 2.34)
Changes will remain in memory only, until you decide to write them.
Be careful before using the write command.

Command (m for help): a
Partition number (1,2, default 2): 1

The bootable flag on partition 1 is enabled now.

Command (m for help): t
Partition number (1,2, default 2): 1
Hex code (type L to list all codes): c

Changed type of partition 'Linux' to 'W95 FAT32 (LBA)'.

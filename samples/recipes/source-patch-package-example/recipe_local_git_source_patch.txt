Patching Local Git Sources using Git Command for Recipe Build:
==============================================================

1. The existing Recipe local Git repository can be modified by using a Patch file in the Recipe Build.
prabhat_kiran@coldstone:~/Documents/Learnings/Yocto_Resources/Poky/poky/build$ cd ../meta-layer/recipes-example/
prabhat_kiran@coldstone:~/Documents/Learnings/Yocto_Resources/Poky/poky/meta-layer/recipes-example$ tree hello-local-git
hello-local-git
└── hello-local-git_0.1.bb

0 directories, 1 file

2. The 'WORKDIR' directory has to be fetched to modify the sources and to generate the Patch file.
prabhat_kiran@coldstone:~/Documents/Learnings/Yocto_Resources/Poky/poky/build$ bitbake -e hello-local-git | grep ^WORKDIR=
WORKDIR="/home/prabhat_kiran/Documents/Learnings/Yocto_Resources/Poky/poky/build/tmp/work/cortexa15t2hf-neon-poky-linux-gnueabi/hello-local-git/0.1-r0"
prabhat_kiran@coldstone:~/Documents/Learnings/Yocto_Resources/Poky/poky/build$ cd tmp/work/cortexa15t2hf-neon-poky-linux-gnueabi/hello-local-git/0.1-r0
prabhat_kiran@coldstone:~/Documents/Learnings/Yocto_Resources/Poky/poky/build/tmp/work/cortexa15t2hf-neon-poky-linux-gnueabi/hello-local-git/0.1-r0$ ls
configure.sstate   deploy-ipks               git                   license-destdir  pkgdata              pseudo                 source-date-epoch
debugsources.list  deploy-rpms               hello-local-git.spec  package          pkgdata-pdata-input  recipe-sysroot         sysroot-destdir
deploy-debs        deploy-source-date-epoch  image                 packages-split   pkgdata-sysroot      recipe-sysroot-native  temp

3. The sources can be modified in the 'git' directory.
prabhat_kiran@coldstone:~/Documents/Learnings/Yocto_Resources/Poky/poky/build/tmp/work/cortexa15t2hf-neon-poky-linux-gnueabi/hello-local-git/0.1-r0$ cd git/
prabhat_kiran@coldstone:~/Documents/Learnings/Yocto_Resources/Poky/poky/build/tmp/work/cortexa15t2hf-neon-poky-linux-gnueabi/hello-local-git/0.1-r0/git$ ls
Makefile  program  program.c
prabhat_kiran@coldstone:~/Documents/Learnings/Yocto_Resources/Poky/poky/build/tmp/work/cortexa15t2hf-neon-poky-linux-gnueabi/hello-local-git/0.1-r0/git$ vi program.c
---> Update the contents of the C file for generating the Patch file.
prabhat_kiran@coldstone:~/Documents/Learnings/Yocto_Resources/Poky/poky/build/tmp/work/cortexa15t2hf-neon-poky-linux-gnueabi/hello-local-git/0.1-r0/git$ vi program.h
---> Add the contents of the Header file to be Built using the Recipe.
prabhat_kiran@coldstone:~/Documents/Learnings/Yocto_Resources/Poky/poky/build/tmp/work/cortexa15t2hf-neon-poky-linux-gnueabi/hello-local-git/0.1-r0/git$ ls
Makefile  program  program.c  program.h

4. These changes in the 'git' directory can be tracked on the 'master' branch of the Git repository.
prabhat_kiran@coldstone:~/Documents/Learnings/Yocto_Resources/Poky/poky/build/tmp/work/cortexa15t2hf-neon-poky-linux-gnueabi/hello-local-git/0.1-r0/git$ git status
On branch master
Your branch is up to date with 'origin/master'.

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
	modified:   program.c

Untracked files:
  (use "git add <file>..." to include in what will be committed)
	program
	program.h

no changes added to commit (use "git add" and/or "git commit -a")
prabhat_kiran@coldstone:~/Documents/Learnings/Yocto_Resources/Poky/poky/build/tmp/work/cortexa15t2hf-neon-poky-linux-gnueabi/hello-local-git/0.1-r0/git$ git diff
diff --git a/program.c b/program.c
index f8b9b47..6d58119 100644
--- a/program.c
+++ b/program.c
@@ -1,7 +1,14 @@
 #include <stdio.h>
+#include "program.h"

 int main()
 {
        printf ("Hello World from Local Git Repository!\n");
+       display();
        return 0;
 }
+
+void display()
+{
+       printf ("Patched the Source!\n");
+}

5. Since, the changes made to the sources are being tracked by the Git, they must be committed to the 'git' directory to generate the Patch file.
prabhat_kiran@coldstone:~/Documents/Learnings/Yocto_Resources/Poky/poky/build/tmp/work/cortexa15t2hf-neon-poky-linux-gnueabi/hello-local-git/0.1-r0/git$ git add program.c
prabhat_kiran@coldstone:~/Documents/.../Poky/poky/build/tmp/work/cortexa15t2hf-neon-poky-linux-gnueabi/hello-local-git/0.1-r0/git$ git commit -m "Updated the C File"
[master 54d16f4] Updated the C File
 1 file changed, 7 insertions(+)
prabhat_kiran@coldstone:~/Documents/Learnings/Yocto_Resources/Poky/poky/build/tmp/work/cortexa15t2hf-neon-poky-linux-gnueabi/hello-local-git/0.1-r0/git$ git add program.h
prabhat_kiran@coldstone:~/Documents/.../Poky/poky/build/tmp/work/cortexa15t2hf-neon-poky-linux-gnueabi/hello-local-git/0.1-r0/git$ git commit -m "Added the Header File"
[master 4c42639] Added the Header File
 1 file changed, 1 insertion(+)
 create mode 100644 program.h
prabhat_kiran@coldstone:~/Documents/Learnings/Yocto_Resources/Poky/poky/build/tmp/work/cortexa15t2hf-neon-poky-linux-gnueabi/hello-local-git/0.1-r0/git$ git format-patch -2 HEAD
0001-Updated-the-C-File.patch
0002-Added-the-Header-File.patch
prabhat_kiran@coldstone:~/Documents/Learnings/Yocto_Resources/Poky/poky/build/tmp/work/cortexa15t2hf-neon-poky-linux-gnueabi/hello-local-git/0.1-r0/git$ ls
0001-Updated-the-C-File.patch  0002-Added-the-Header-File.patch  Makefile  program  program.c  program.h

6. Move the Patch files from the 'git' directory to the Recipe folder in the corresponding Meta-Layer.
prabhat_kiran@coldstone:~/Documents/Learnings/Yocto_Resources/.../hello-local-git/0.1-r0/git$ cp *.patch ../../../../../../../meta-layer/recipes-example/hello-local-git/files/
prabhat_kiran@coldstone:~/Documents/Learnings/Yocto_Resources/Poky/poky/build/tmp/work/cortexa15t2hf-neon-poky-linux-gnueabi/hello-local-git/0.1-r0/git$ rm *.patch program.h
prabhat_kiran@coldstone:~/Documents/Learnings/Yocto_Resources/Poky/poky/build/tmp/work/cortexa15t2hf-neon-poky-linux-gnueabi/hello-local-git/0.1-r0/git$ ls
Makefile  program  program.c

7. Update the Recipe file in the Recipe folder to include the Patch files in the Recipe Build.
prabhat_kiran@coldstone:~/Documents/Learnings/Yocto_Resources/Poky/poky/build/tmp/work/cortexa15t2hf-neon-poky-linux-gnueabi/hello-local-git/0.1-r0/git$ cd ../../../../../../
prabhat_kiran@coldstone:~/Documents/Learnings/Yocto_Resources/Poky/poky/build$ cd ../meta-layer/recipes-example/hello-local-git/
prabhat_kiran@coldstone:~/Documents/Learnings/Yocto_Resources/Poky/poky/meta-layer/recipes-example/hello-local-git$ vi hello-local-git_0.1.bb
=> ...
=> SRC_URI = "git:///home/prabhat_kiran/hello-world;branch=master;protocol=file \
=>     file://0001-Updated-the-C-File.patch \
=>     file://0002-Added-the-Header-File.patch \
=> "
=> ...
prabhat_kiran@coldstone:~/Documents/Learnings/Yocto_Resources/Poky/poky/meta-layer/recipes-example/hello-local-git$ cd ..
prabhat_kiran@coldstone:~/Documents/Learnings/Yocto_Resources/Poky/poky/meta-layer/recipes-example$ tree hello-local-git
hello-local-git
├── files
│   ├── 0001-Updated-the-C-File.patch
│   └── 0002-Added-the-Header-File.patch
└── hello-local-git_0.1.bb

1 directory, 3 files
